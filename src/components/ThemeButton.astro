<button id="theme-button">
    Theme
</button>
<script>
    const isDarkSet = localStorage.theme === 'dark';
    const isThemeStored = 'theme' in localStorage;
    const isDarkPrefered = window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (isDarkSet || (!isThemeStored && isDarkPrefered)) {
        document.documentElement.classList.add('dark')
    } else {
        document.documentElement.classList.remove('dark')
    }
    const button = document.getElementById("theme-button")
    button.addEventListener("click", () => {
        document.documentElement.classList.toggle('dark')
        localStorage.theme = localStorage.theme === 'dark' ? 'light' : 'dark'
    })
</script>